{% extends './base/base.html' %}
{% block content %}
<div class="container mt-4">
  <h4 class="mb-3">➕ إضافة نشاط</h4>
  <form method="post">
    {% csrf_token %}

    <div class="mb-3">
      <label class="form-label">عنوان النشاط</label>
      <input type="text" name="title" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">نوع النشاط</label>
      <select name="event_type" class="form-select">
        <option value="trip">رحلة</option>
        <option value="party">حفلة</option>
        <option value="tournament">بطولة</option>
        <option value="other">آخر</option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">التاريخ</label>
      <input type="date" name="date" class="form-control">
    </div>

    <div class="mb-3">
      <label class="form-label">السعر لكل مشارك (درهم)</label>
      <input type="number" step="0.01" name="price_per_participant" class="form-control">
    </div>

    <div class="mb-3">
      <label class="form-label">المصاريف (درهم)</label>
      <input type="number" step="0.01" name="total_expense" class="form-control" value="0">
    </div>

    <div class="mb-3">
      <label class="form-label">الوصف</label>
      <textarea name="description" class="form-control"></textarea>
    </div>

    <!-- المشاركون -->
    <div class="mb-3">
      <label class="form-label">المشاركون</label>
      <select name="participants" id="participants" class="form-select" multiple>
        {% for student in students %}
          <option value="{{ student.id }}">{{ student.fname }} {{ student.lname }}</option>
        {% endfor %}
      </select>
    </div>

    <button type="submit" class="btn btn-success w-100">حفظ النشاط</button>
  </form>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <script>
  document.addEventListener("DOMContentLoaded", function() {
    $('#participants').select2({
      placeholder: "ابحث عن الطلاب وأضفهم",
      width: '100%',
      allowClear: true,
      language: {
        noResults: function() {
          return "لا يوجد نتائج";
        }
      }
    });
  });
</script>
{% endblock %}