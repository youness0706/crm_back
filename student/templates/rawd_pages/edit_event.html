{% extends './base/base.html' %}
{% block content %}
<div class="container mt-4">
  <h4 class="mb-3">โ๏ธ ุชุนุฏูู ุงููุดุงุท</h4>
  <form method="post">
    {% csrf_token %}

    <div class="mb-3">
      <label class="form-label">ุนููุงู ุงููุดุงุท</label>
      <input type="text" name="title" class="form-control" value="{{ event.title }}" required>
    </div>

    <div class="mb-3">
      <label class="form-label">ููุน ุงููุดุงุท</label>
      <select name="event_type" class="form-select">
        <option value="trip" {% if event.event_type == "trip" %}selected{% endif %}>ุฑุญูุฉ</option>
        <option value="party" {% if event.event_type == "party" %}selected{% endif %}>ุญููุฉ</option>
        <option value="tournament" {% if event.event_type == "tournament" %}selected{% endif %}>ุจุทููุฉ</option>
        <option value="other" {% if event.event_type == "other" %}selected{% endif %}>ุขุฎุฑ</option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">ุงูุชุงุฑูุฎ</label>
      <input type="date" name="date" class="form-control" value="{{ event.date|date:'Y-m-d' }}">
    </div>

    <div class="mb-3">
      <label class="form-label">ุงูุณุนุฑ ููู ูุดุงุฑู (ุฏุฑูู)</label>
      <input type="number" step="0.01" name="price_per_participant" class="form-control" value="{{ event.price_per_participant }}">
    </div>

    <div class="mb-3">
      <label class="form-label">ุงููุตุงุฑูู (ุฏุฑูู)</label>
      <input type="number" step="0.01" name="total_expense" class="form-control" value="{{ event.total_expense }}">
    </div>

    <div class="mb-3">
      <label class="form-label">ุงููุตู</label>
      <textarea name="description" class="form-control">{{ event.description }}</textarea>
    </div>

    <!-- ุงููุดุงุฑููู -->
    <div class="mb-3">
      <label class="form-label">ุงููุดุงุฑููู</label>
      <select name="participants" id="participants" class="form-select" multiple>
        {% for student in students %}
          <option value="{{ student.id }}" {% if student in event.participants.all %}selected{% endif %}>
            {{ student.fname }} {{ student.lname }}
          </option>
        {% endfor %}
      </select>
    </div>

    <button type="submit" class="btn btn-primary w-100">๐พ ุชุญุฏูุซ</button>
  </form>
</div>

<!-- Select2 -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
  $(document).ready(function() {
    $('#participants').select2({
      placeholder: "ุงุจุญุซ ุนู ุงูุทูุงุจ",
      width: '100%',
      allowClear: true,
      language: {
        noResults: function() {
          return "ูุง ููุฌุฏ ูุชุงุฆุฌ";
        }
      }
    });
  });
</script>
{% endblock %}
