{% extends "./base/base.html" %}
{% block content %}
<div class="container mt-4">

  <h2 class="mb-4">🏫 معلومات الروض</h2>

  {% if rawd_info %}
  <div class="card shadow rounded-3 mb-4">
    <div class="card-body">
      <h4 class="card-title">{{ rawd_info.name }}</h4>
      <p><strong>📍 العنوان:</strong> {{ rawd_info.address }}</p>
      <p><strong>📞 الهاتف:</strong> {{ rawd_info.phone }}</p>
      <p><strong>📧 البريد:</strong> {{ rawd_info.email }}</p>
      <p><strong>تاريخ الافتتاح:</strong> {{ rawd_info.established_year }}</p>
      <p><strong>💰 الإيجار:</strong> {{ rawd_info.rent_amount }}</p>
    </div>
    <a href="{% url 'edit_rawd_info' %}" class="btn btn-primary">✏️ تعديل المعلومات</a>
  </div>
  {% else %}
  <div class="alert alert-warning">⚠️ لم يتم إضافة معلومات الروض بعد</div>
  {% endif %}

  <h3 class="mb-3"><a class="btn btn-success" href="{% url 'add_rawd_staff' %}">➕ إضافة طاقم إداري</a> الطاقم الإداري</h3>
  {% if staff_members %}
  <div class="row">
    {% for staff in staff_members %}
    {% if staff.role == "rawd" %}
    <div class="col-md-4 mb-3">
      <div class="card shadow-sm h-100">
        <div class="card-body text-center">
          <h5 class="card-title">{{ staff.user.username }}</h5>
          <p><strong>الدور:</strong> {{ staff.role }}</p>
          <p><strong>📧</strong> {{ staff.email|default:"-" }}</p>
          <p><strong>📞</strong> {{ staff.phone_number|default:"-" }}</p>
          <p><strong>💰 الراتب:</strong> {{ staff.salary }} درهم</p>
          <p><strong>📅 تاريخ البدء:</strong> {{ staff.started }}</p>
          <div class="card-footer text-center">
            {% if not staff.user.is_superuser %}
            <a href="{% url 'remove_staff' staff.id %}" class="btn btn-sm btn-danger" onclick="return confirm('هل أنت متأكد من حذف هذا الطاقم الإداري؟');">🗑️ حذف</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% endif %}
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info">ℹ️ لا يوجد طاقم إداري مرتبط بالروض أو المديرين بعد</div>
  {% endif %}

</div>
{% endblock %}
