{% extends './base/base.html' %}
{% block content %}
<div class="container mt-4">
  <h4 class="mb-3">ğŸ“‹ Ø§Ù„Ø£Ù†Ø´Ø·Ø©</h4>

  {% if events %}
    <div class="row g-3">
      {% for event in events %}
        <div class="col-12">
          <div class="card shadow-sm rounded-3">
            <div class="card-body">
              <h5 class="card-title text-primary">
                {{ event.title }}
                <span class="badge bg-info text-dark">{{ event.get_event_type_display }}</span>
              </h5>
              <p class="card-text text-muted mb-1">
                ğŸ—“ï¸ {{ event.date|date:"Y-m-d" }}
              </p>
              <p class="mb-1">ğŸ’µ Ø§Ù„Ø³Ø¹Ø± Ù„Ù„ÙØ±Ø¯: <strong>{{ event.price_per_participant }} Ø¯Ø±Ù‡Ù…</strong></p>
              <p class="mb-1">ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†: <strong>{{ event.participants.count }}</strong></p>
              <p class="mb-1">ğŸ’° Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ„ÙŠ: 
                <strong>{{ event.participants.count|add:"0"|floatformat:0|default:"0"|floatformat:0|add:"0" }} Ã— {{ event.price_per_participant }} = {{ event.profit }} Ø¯Ø±Ù‡Ù…</strong>
              </p>
              <p class="mb-1">ğŸ“‰ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ: <strong>{{ event.total_expense }} Ø¯Ø±Ù‡Ù…</strong></p>
              <p class="mb-1">ğŸ“Š Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ØµØ§ÙÙŠ: 
                <strong class="{% if event.profit|floatformat:0|default:0|add:"0" < event.total_expense %}text-danger{% else %}text-success{% endif %}">
                  {{ event.profit }} - {{ event.total_expense }} = 
                  {{ event.profit|default:0|floatformat:0|add:"0" |floatformat:0|add:"0" |floatformat:0 }}
                </strong>
              </p>

              <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
              <div class="d-flex justify-content-between mt-3">
                <a href="{% url 'edit_event' event.id %}" class="btn btn-sm btn-warning">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
                <a href="{% url 'remove_event' event.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')">ğŸ—‘ï¸ Ø­Ø°Ù</a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">ğŸš« Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ø¨Ø¹Ø¯.</div>
  {% endif %}
</div>
{% endblock %}