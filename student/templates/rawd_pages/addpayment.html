{% extends "./base/base.html" %}
{% load static %}

{% block title %}Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©{% endblock %}

{% block content %}
<div class="container-fluid mt-3">
  <div class="card shadow-sm rounded-3">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">â• Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©</h5>
    </div>
    <div class="card-body">
      <form method="post" class="row g-3">
        {% csrf_token %}

        <!-- Student Search -->
        <div class="col-12">
          <label for="student" class="form-label">Ø§Ø®ØªØ± Ø§Ù„Ø·Ø§Ù„Ø¨</label>
          <select id="student" name="student" class="form-select" required></select>
        </div>

        <!-- Payment Type -->
        <div class="col-6">
          <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙØ¹</label>
          <select name="type" class="form-select" required>
            <option value="monthly">Ø´Ù‡Ø±ÙŠ</option>
            <option value="annual">Ø³Ù†ÙˆÙŠ</option>
          </select>
        </div>

        <!-- Amount -->
        <div class="col-6">
          <label class="form-label">Ø§Ù„Ù…Ø¨Ù„Øº</label>
          <input type="number" step="0.01" name="amount" class="form-control" required>
        </div>

        <!-- Payment Date -->
        <div class="col-6">
          <label class="form-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹</label>
          <input type="date" name="payment_date" class="form-control" required>
        </div>

        <!-- Description -->

        <div class="col-12">
          <label class="form-label">Ø§Ù„ÙˆØµÙ</label>
          <textarea name="description" class="form-control" rows="2"></textarea>
        </div>

        <!-- Submit -->
        <div class="col-12 d-grid">
          <button type="submit" class="btn btn-success">ğŸ’¾ Ø­ÙØ¸</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Include Select2 -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
  $(document).ready(function() {
    $('#student').select2({
      placeholder: 'ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø§Ù„Ø§Ø³Ù…',
      minimumInputLength: 1,
      ajax: {
        url: "{% url 'search_students' %}",
        dataType: 'json',
        delay: 250,
        data: function (params) {
          return { q: params.term };
        },
        processResults: function (data) {
          return { results: data.results };
        },
        cache: true
      },
      width: '100%'
    });
  });
</script>
{% endblock %}
