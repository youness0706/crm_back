{% extends "./base/base.html" %}
{% block content %}
<div class="container mt-4" dir="rtl">

  <h2 class="mb-4">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>

  <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª -->
  <div class="row g-4">
    <div class="col-md-3">
      <div class="card text-white bg-primary shadow rounded-3 text-center">
        <div class="card-body">
          <h5>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</h5>
          <h2>{{ total_students }}</h2>
          <small class="text-light">+{{ new_students }} Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</small>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-white bg-success shadow rounded-3 text-center">
        <div class="card-body">
          <h5>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„</h5>
          <h2>{{ total_income }} Ø¯Ø±Ù‡Ù…</h2>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-white bg-danger shadow rounded-3 text-center">
        <div class="card-body">
          <h5>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</h5>
          <h2>{{ total_expenses }} Ø¯Ø±Ù‡Ù…</h2>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-white bg-dark shadow rounded-3 text-center">
        <div class="card-body">
          <h5>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h5>
          <h2>{{ net_profit }} Ø¯Ø±Ù‡Ù…</h2>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-12">
      <div class="card shadow rounded-3">
        <div class="card-header bg-info text-white">
          <h5>Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h5>
        </div>
        <div class="card-body">
          <a href="{% url 'students' %}" class="btn btn-outline-primary me-2">ğŸ‘©â€ğŸ“ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</a>
          <a href="{% url 'payments' %}" class="btn btn-outline-success me-2">ğŸ’° Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</a>
          <a href="{% url 'expenses' %}" class="btn btn-outline-danger me-2">ğŸ“‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</a>
          <a href="{% url 'rawd_financials' %}" class="btn btn-outline-dark">ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ -->
  <div class="card shadow mt-5">
    <div class="card-header bg-info text-white">
      <h5 class="mb-0">ğŸ“Š Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¯Ø®Ù„ ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ (Ø¢Ø®Ø± 6 Ø£Ø´Ù‡Ø±)</h5>
    </div>
    <div class="card-body">
      <canvas id="financeChart"></canvas>
    </div>
  </div>

</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById("financeChart").getContext("2d");
  new Chart(ctx, {
    type: "line",
    data: {
      labels: {{ labels|safe }},
      datasets: [
        {
          label: "Ø§Ù„Ø¯Ø®Ù„",
          data: {{ income_data|safe }},
          borderColor: "#4caf50",
          backgroundColor: "rgba(76,175,80,0.2)",
          tension: 0.3,
          fill: true
        },
        {
          label: "Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ",
          data: {{ expense_data|safe }},
          borderColor: "#f44336",
          backgroundColor: "rgba(244,67,54,0.2)",
          tension: 0.3,
          fill: true
        }
      ]
    },
    options: { responsive: true, plugins: { legend: { position: "bottom" } } }
  });
</script>
{% endblock %}
